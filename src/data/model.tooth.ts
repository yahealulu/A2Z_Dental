import type { ToothSchema } from "./types";

export class Tooth implements ToothSchema {
  ISO: number = 0;
  notes: string[] = [];
  patient: any = null;

  constructor(patient: any = null) {
    this.patient = patient;
  }

  // تعيين رقم ISO للسن
  fromISO(iso: number): Tooth {
    this.ISO = iso;
    return this;
  }

  // الحصول على اسم السن
  get Name(): string {
    return getToothName(this.ISO);
  }

  // التحقق مما إذا كان السن يحتاج إلى اهتمام
  get concern(): boolean {
    return this.notes.length > 0;
  }

  // تحويل السن إلى JSON للتخزين
  toJSON(): ToothSchema {
    return {
      ISO: this.ISO,
      notes: [...this.notes]
    };
  }

  // إنشاء سن من بيانات JSON
  fromJSON(input: ToothSchema): Tooth {
    this.ISO = input.ISO;
    this.notes = [...input.notes];
    return this;
  }
}

// قاموس أسماء الأسنان
const toothNames: Record<number, string> = {
  // الأسنان الدائمة
  11: "القاطع المركزي العلوي الأيمن",
  12: "القاطع الجانبي العلوي الأيمن",
  13: "الناب العلوي الأيمن",
  14: "الضاحك الأول العلوي الأيمن",
  15: "الضاحك الثاني العلوي الأيمن",
  16: "الطاحن الأول العلوي الأيمن",
  17: "الطاحن الثاني العلوي الأيمن",
  18: "ضرس العقل العلوي الأيمن",
  21: "القاطع المركزي العلوي الأيسر",
  22: "القاطع الجانبي العلوي الأيسر",
  23: "الناب العلوي الأيسر",
  24: "الضاحك الأول العلوي الأيسر",
  25: "الضاحك الثاني العلوي الأيسر",
  26: "الطاحن الأول العلوي الأيسر",
  27: "الطاحن الثاني العلوي الأيسر",
  28: "ضرس العقل العلوي الأيسر",
  31: "القاطع المركزي السفلي الأيسر",
  32: "القاطع الجانبي السفلي الأيسر",
  33: "الناب السفلي الأيسر",
  34: "الضاحك الأول السفلي الأيسر",
  35: "الضاحك الثاني السفلي الأيسر",
  36: "الطاحن الأول السفلي الأيسر",
  37: "الطاحن الثاني السفلي الأيسر",
  38: "ضرس العقل السفلي الأيسر",
  41: "القاطع المركزي السفلي الأيمن",
  42: "القاطع الجانبي السفلي الأيمن",
  43: "الناب السفلي الأيمن",
  44: "الضاحك الأول السفلي الأيمن",
  45: "الضاحك الثاني السفلي الأيمن",
  46: "الطاحن الأول السفلي الأيمن",
  47: "الطاحن الثاني السفلي الأيمن",
  48: "ضرس العقل السفلي الأيمن",
  // الأسنان اللبنية
  51: "القاطع المركزي العلوي الأيمن اللبني",
  52: "القاطع الجانبي العلوي الأيمن اللبني",
  53: "الناب العلوي الأيمن اللبني",
  54: "الطاحن الأول العلوي الأيمن اللبني",
  55: "الطاحن الثاني العلوي الأيمن اللبني",
  61: "القاطع المركزي العلوي الأيسر اللبني",
  62: "القاطع الجانبي العلوي الأيسر اللبني",
  63: "الناب العلوي الأيسر اللبني",
  64: "الطاحن الأول العلوي الأيسر اللبني",
  65: "الطاحن الثاني العلوي الأيسر اللبني",
  71: "القاطع المركزي السفلي الأيسر اللبني",
  72: "القاطع الجانبي السفلي الأيسر اللبني",
  73: "الناب السفلي الأيسر اللبني",
  74: "الطاحن الأول السفلي الأيسر اللبني",
  75: "الطاحن الثاني السفلي الأيسر اللبني",
  81: "القاطع المركزي السفلي الأيمن اللبني",
  82: "القاطع الجانبي السفلي الأيمن اللبني",
  83: "الناب السفلي الأيمن اللبني",
  84: "الطاحن الأول السفلي الأيمن اللبني",
  85: "الطاحن الثاني السفلي الأيمن اللبني"
};

// دالة للحصول على اسم السن
export function getToothName(ISO: number): string {
  return toothNames[ISO] || `سن رقم ${ISO}`;
}
